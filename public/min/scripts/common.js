"use strict";function HideSeeMore(a){$(a).html("No more items!"),setTimeout(function(){$(a).hide()},2e3)}function onPlayerReady(a){a.target.playVideo()}function onPlayerError(a){a.target.playVideo()}function startPlayer(a){var e=a.siblings(".ytplayer").data("playid");player=new YT.Player(e,{height:MediaHeight,width:Width,videoId:e,playerVars:{autoplay:1,controls:2,showinfo:0,playsinline:1},events:{onReady:onPlayerReady,onError:onPlayerError}}),$ClickPlayer=a,a.css("display","none"),a.children(".bg-img").hide(),a.children(".btn-beginPlayer").hide(),a.siblings(".btn-morePlayer").removeAttr("hidden"),a.parents(".player-item").addClass("active")}function switchPlayer(a){var e=$(window).scrollTop()+$(window).height(),t=$(a).offset().top,i=t+$(a).height();return t>e||i<$(window).scrollTop()}!function($,Swiper){function loadingShow(a,e){$(a).show(),$(e).hide()}function loadingHide(a,e){$(a).hide(),$(e).show()}function loadingAndSeemoreHide(a,e){$(a).hide(),$(e).hide()}function SubstringText(a,e){$(a).each(function(){var a=$(this).html();a.length>e&&(a=a.substring(0,e)+"..."),$(this).html(a)})}function switchImpr(a){var e=$(window).scrollTop()+$(window).height(),t=$(a).offset().top;return $(a).is("a")&&(t+=$(a).height()),t<=e}function setCookie(a,e){var t=new Date;t.setTime(t.getTime()+3e5),document.cookie=a+"="+escape(e)+";expires="+t.toGMTString()}function getCookie(a){var e=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!=e?unescape(e[2]):null}function pushAjax(a){$.each(a,function(a,e){if(switchImpr(e)){var t=$(e).data("impr");$(e).removeAttr("data-impr"),void 0!=t&&null!=t&&""!=t&&(testIndex++,$.ajax({url:t}).always(function(){}))}})}function imprList(){var a=$("[data-impr]");0!==a.length&&pushAjax(a)}function swiperBtnHover(){$(".productImg-list").each(function(){var a=$(this).children(".productImg-item").length,e=$(this).siblings(".swiper-button-next"),t=$(this).siblings(".swiper-button-prev");e.hide(),t.hide(),$(this).parent().hover(function(){a>3&&(e.show(),t.show())},function(){e.hide(),t.hide()})})}function product_onSkuClick(a,e,t){for(var i=[],s=0;s<spuAttrs.length;s++)if(a==spuAttrs[s].attr_type)for(var d=0;d<spuAttrs[s].skuAttrValues.length;d++)e==spuAttrs[s].skuAttrValues[d].attr_value_id&&(t?product_arrayTemp_click["key"+a]=i=spuAttrs[s].skuAttrValues[d].skus:i=spuAttrs[s].skuAttrValues[d].skus);return i}function product_setLastSku(){var a=0,e=[];for(var t in product_arrayTemp_click)e=0!==a?product_array_intersection(e,product_arrayTemp_click[t]):product_arrayTemp_click[t],a=1;return 1==e.length&&($("#productsku").val(e[0]),$.each(product_data.skuExps,function(a,t){if(e[0]==t.sku)return $(".newPrice").html("$"+(t.skuPrice.sale_price/100).toFixed(2)),$(".oldPrice").html("$"+(t.skuPrice.price/100).toFixed(2)),!1})),e}function product_onclickStatic(a,e,t){for(var i=product_setLastSku(),s=0;s<spuAttrs.length;s++)if(e!=spuAttrs[s].attr_type)for(var d=0;d<spuAttrs[s].skuAttrValues.length;d++){for(var n=!1,o=0;o<spuAttrs[s].skuAttrValues[d].skus.length;o++){$("#skutype"+spuAttrs[s].skuAttrValues[d].attr_value_id).removeClass("disabled");var l=a;if(0==$("#p_a_w"+spuAttrs[s].attr_type).data("sel")&&(l=i),l.indexOf(spuAttrs[s].skuAttrValues[d].skus[o])>=0){$("#skutype"+spuAttrs[s].skuAttrValues[d].attr_value_id).hasClass("disabled")&&$("#skutype"+spuAttrs[s].skuAttrValues[d].attr_value_id).removeClass("disabled"),n=!0;break}}n||(t?$("#skutype"+spuAttrs[s].skuAttrValues[d].attr_value_id).addClass("disabled"):$("#skutype"+spuAttrs[s].skuAttrValues[d].attr_value_id).removeClass("disabled"))}}function product_array_remove_repeat(a){for(var e=[],t=0;t<a.length;t++){for(var i=!0,s=a[t],d=0;d<e.length;d++)if(s===e[d]){i=!1;break}i&&e.push(s)}return e}function product_array_intersection(a,e){for(var t=[],i=0;i<e.length;i++)for(var s=e[i],d=0;d<a.length;d++)if(s===a[d]){t.push(s);break}return product_array_remove_repeat(t)}function product_getSkuQty(a){for(var e in product_data.skuExps)if(product_data.skuExps[e].sku==a)return product_cache_skuQty[a]=product_data.skuExps[e].stock_qtty,product_data.skuExps[e].stock_qtty}function checkStock(a){$.ajax({url:"/checkStock",type:"POST",data:{skus:a}}).done(function(a){a.success?1===a.data.list[0].stockStatus&&($("#skuQty").data("num",$("#skuQty").data("num")+1),$("#skuQty").html($("#skuQty").data("num")),product_cache_skuQty[a.data.list[0].sku]=product_cache_skuQty[a.data.list[0].sku]+1,$("#addQtySku").removeClass("disabled")):(AddItemFailModal.open(),setTimeout(function(){AddItemFailModal.close()},1500))})}function pSelAttr(){if(void 0==spuAttrs)return!0;var a=!0;return $.each(product_data.spuAttrs,function(e,t){if(0==$("#p_a_w"+t.attr_type).data("sel"))return $("#p_a_w"+t.attr_type).focus(),$("#p_a_w"+t.attr_type).removeClass("off"),a=!1,!1}),a}function appendProductTemplateList(a,e){var t=template("tpl-productTemplate",e),i=$.parseHTML(t);a.html(i)}function timer(a){var e=window.setInterval(function(){a<=1&&($(".stock-qtty").html("Sold Out"),$(".btn-addToBag").addClass("disabled"),clearInterval(e));var t=0,i=0,s=0,d=0;a>0&&(t=Math.floor(a/86400),i=Math.floor(a/3600)-24*t,s=Math.floor(a/60)-24*t*60-60*i,d=Math.floor(a)-24*t*60*60-60*i*60-60*s),leftNum<2592e5?$(".time_show").html(24*t+i+"h: "+s+"m: "+d+"s"):$(".time_show").html(t+"d: "+i+"h: "+s+"m: "+d+"s"),$("#designerDetailContainer").length>0&&($(".day-info").html(t),$(".hour-info").html(i),$(".min-info").html(s),$(".sec-info").html(d)),a--},1e3)}function cart_update_info(){$.ajax({url:"/cart/list",type:"GET"}).done(function(a){a.success&&(""!=a.data?($(".total_amount").html("$"+(a.data.total_amount/100).toFixed(2)),$(".total_sku_qtty").html("Items ("+a.data.total_sku_qtty+"):"),$(".vas_amount").html("$"+(a.data.vas_amount/100).toFixed(2)),$(".pay_amount").html("$"+(a.data.pay_amount/100).toFixed(2)),a.data.pay_amount<=0&&$(".btn-toCheckout").addClass("disabled")):location.reload())})}function checkValid(a){var e=a.val();return""!=e&&void 0!=e||(a.siblings(".warning-info").removeClass("off"),!1)}function initAddAddressForm(){var a=$("#addAddressForm").data("aid");if(""===a||void 0===a){$(".address-item").length<=0?($(".isDefault").addClass("active"),CheckNum=0):$(".isDefault").removeClass("active"),$('input[name="email"]').val(""),$('input[name="name"]').val(""),$('input[name="city"]').val(""),$('input[name="state"]').val(""),$('input[name="tel"]').val(""),$('input[name="addr1"]').val(""),$('input[name="addr2"]').val(""),$('input[name="zip"]').val(""),$(".address-save").addClass("disabled"),$('select[name="country"]').prop("selectedIndex",0);var e=$('select[name="country"] option:selected').text();initCityState(e,"")}else $.ajax({url:"/address/"+a,type:"GET"}).done(function(a){$('input[name="email"]').val(a.email),$('input[name="name"]').val(a.name),$('input[name="city"]').val(a.city),$('input[name="state"]').val(a.state),$('input[name="tel"]').val(a.telephone),$('input[name="addr1"]').val(a.detail_address1),$('input[name="addr2"]').val(a.detail_address2),$('input[name="zip"]').val(a.zip),$('select[name="country"]').val(a.country),initCityState(a.country,a.state),1==a.isDefault?$(".isDefault").addClass("active"):$(".isDefault").removeClass("active"),$(".address-save").removeClass("disabled")})}function initCityState(a,e){var t=$('select[name="country"] > option[value="'+a+'"]').data("id"),i=$('select[name="country"] > option[value="'+a+'"]').data("type");void 0!=i&&0===i?($(".state-info").html('<input type="text" name="state" class="form-control contrlo-lg text-primary" placeholder="State (optional)">'),$('input[name="state"]').val(e)):void 0!=i&&1===i?($(".state-info").html('<input type="text" name="state" class="form-control contrlo-lg text-primary address-state" placeholder="State"><div class="warning-info flex flex-alignCenter text-warning p-t-5x off"> <i class="iconfont icon-caveat icon-size-md p-r-5x"></i> <span class="font-size-base">Please enter your State !</span> </div>'),$('input[name="state"]').val(e)):$.ajax({url:"/statelist/"+t,type:"GET"}).done(function(a){$(".state-info").html('<select name="state" class="form-control contrlo-lg select-country"></select>'),$.each(a,function(a,e){var t=e.state_name_sn,i=e.state_name_en;$("<option></option>").val(t).text(i).appendTo($("select"))}),""!=e&&$('select[name="state"]').val(e)})}function getCheckoutInfo(){var a=void 0==$("#defaultAddr").data("aid")?"":$("#defaultAddr").data("aid"),e=void 0==$("#pcode").data("bindid")?"":$("#pcode").data("bindid"),t=void 0==$('input[name="shippingMethod"]:checked').val()?"":$('input[name="shippingMethod"]:checked').val();$.ajax({url:"/cart/accountlist?aid="+a+"&bindid="+e+"&logisticstype="+t,type:"GET"}).done(function(a){a.success&&(a.data.cps_amount>0?($(".cps_amountShow").removeClass("hidden"),$(".cps_amount").html("-$"+(a.data.cps_amount/100).toFixed(2))):$(".cps_amountShow").addClass("hidden"),a.data.tax_amount>0?($(".tax_amountShow").removeClass("hidden"),$(".tax_amount").html("$"+(a.data.tax_amount/100).toFixed(2))):$(".tax_amountShow").addClass("hidden"),a.data.freight_amount>0?$(".freight_amount").html("$"+(a.data.freight_amount/100).toFixed(2)):$(".freight_amount").html("Free"),$(".pay_amount").html("$"+(a.data.pay_amount/100).toFixed(2)),$(".checkoutInfo").data("price",a.data.total_amount+a.data.vas_amount))})}function getAddressList(){$.ajax({url:"/address",type:"GET"}).done(function(a){a.success&&(appendAddressList(a.data),1===$(".address-item").length&&($.each(a.data.list,function(a,e){var t=e.country,i=e.city,s=e.detail_address1,d=e.zip,n=e.name,o=e.state;$("#defaultAddr").html(n+s+" "+i+" "+o+" "+t+" "+d),$("#defaultAddr").data("csn",e.country_name_sn),$("#defaultAddr").data("aid",e.receiving_id)}),getshiplist()))})}function getshiplist(){$.ajax({url:"/getshiplist?country="+$("#defaultAddr").data("csn")+"&price="+$(".checkoutInfo").data("price"),type:"GET"}).done(function(a){if(a.success){var e=a.data.list[0].pay_price>0?" +$"+(a.data.list[0].pay_price/100).toFixed(2):"";$(".shippingMethodShow").html(a.data.list[0].logistics_name+e),console.log(a.data.list.length),a.data.list.length<2?$(".shippingMethodButton").html(""):$(".shippingMethodButton").html("Edit"),appendMethodList(a.data),getCheckoutInfo()}})}function appendMethodList(a){var e=template("tpl-method",a),t=$.parseHTML(e);$(".checkout-method").html(t)}function appendAddressList(a){var e=template("tpl-address",a),t=$.parseHTML(e);$(".address-list").html(t)}function login_signin(){$('[data-role="login-submit"]').addClass("disabled"),""!=$(".login-email").val()&&""!=$(".login-pw").val()&&$.ajax({url:"/signin",type:"POST",data:$("#login").serialize()}).done(function(a){a.success?window.location.href=a.redirectUrl:($(".login-pw").parent().siblings(".warning-info").removeClass("off"),$(".login-pw").parent().siblings(".warning-info").children("span").html(a.prompt_msg))}).always(function(){$('[data-role="login-submit"]').removeClass("disabled")})}function login_forgetPassword(){$.ajax({url:"/forget",type:"POST",data:$("#forgetPassword").serialize()}).done(function(a){a.success?(alert(a.prompt_msg),$(".restPwd-content").addClass("hidden").removeClass("active"),$(".login-content").removeClass("hidden").addClass("active"),$(".login-title").text("Sign in with Motif Account")):($(".forget-email").parent().siblings(".warning-info").removeClass("off"),$(".forget-email").parent().siblings(".warning-info").children("span").html(a.prompt_msg))}).always(function(){})}function login_validationEmail(a){var e=!1,t="Please enter your email",i="Please enter a valid email address",s=a.parent().siblings(".warning-info"),d=a.val(),n=/^[a-zA-Z0-9_-]+@([a-z0-9]*[-_]?[a-z0-9]+)+[\.][a-z]{2,3}([\.][a-z]{2})?$/i;return""==d||void 0==d||null==d?(s.removeClass("off"),s.children("span").html(t),e=!1):n.test(d)?(s.addClass("off"),e=!0):(s.removeClass("off"),s.children("span").html(i),e=!1),e}function login_validationPassword(a){var e=!1,t="Please enter your password",i="Oops, that's not a match.",s=a.parent().siblings(".warning-info"),d=a.val();return""==d||void 0==d||null==d?(s.removeClass("off"),s.children("span").html(t),e=!1):d.length<6||d.length>32?(s.removeClass("off"),s.children("span").html(i),e=!1):(s.addClass("off"),e=!0),e}function attachSignin(a){console.log(a.id),auth2.attachClickHandler(a,{},function(a){var e=a.getBasicProfile();$.ajax({url:"/googlelogin",type:"POST",data:{email:e.getEmail(),id:e.getId(),name:e.getName(),avatar:e.getImageUrl()}}).done(function(a){console.log("success"),a.success?window.location.href=a.redirectUrl:($(".login-pw").parent().siblings(".warning-info").removeClass("off"),$(".login-pw").parent().siblings(".warning-info").children("span").html(a.prompt_msg))}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},function(a){console.error(JSON.stringify(a,void 0,2))})}function statusChangeCallback(a){console.log("statusChangeCallback"),console.log(a),"connected"===a.status?loginFacebook():"not_authorized"===a.status}function loginFacebook(){FB.api("/me","GET",{fields:"id,name,picture.width(750).height(750),email"},function(a){""==a.email||void 0==a?$.ajax({url:"/facebookstatus/"+a.id,type:"get"}).done(function(e){e.status?(a.email=e.data.email,loginSuccess(a)):window.location.href="/addFacebookEmail?id="+a.id+"&name="+a.name}):loginSuccess(a)})}function loginSuccess(a){$.ajax({url:"/facebooklogin",type:"POST",data:{email:a.email,id:a.id,name:a.name,avatar:a.picture.data.url}}).done(function(a){a.success?window.location.href=a.redirectUrl:($(".warning-info").removeClass("off"),$(".warning-info").children("span").html(a.prompt_msg))})}function register_validationNick(a){var e=!1,t="Please enter your nickname",i=a.parent().siblings(".warning-info"),s=a.val();return""==s||void 0==s||null==s?(i.removeClass("off"),i.children("span").html(t),e=!1):(i.addClass("off"),e=!0),e}function register_signup(){$('[data-role="register-submit"]').addClass("disabled"),$.ajax({url:"/signup",type:"POST",data:$("#register").serialize()}).done(function(a){a.success?window.location.href=a.redirectUrl:($(".register-pw").parent().siblings(".warning-info").removeClass("off"),$(".register-pw").parent().siblings(".warning-info").children("span").html(a.prompt_msg))}).always(function(){$('[data-role="register-submit"]').removeClass("disabled")})}function reset_password(){$('[data-role="reset-submit"]').addClass("disabled"),$.ajax({type:"POST",url:"/reset",data:$("#reset").serialize()}).done(function(a){a.success?window.location.href=a.redirectUrl:($(".reset-lastpw").parent().siblings(".warning-info").removeClass("off"),$(".reset-lastpw").parent().siblings(".warning-info").children("span").html("Oops something went wrong, please go to the sign-in page and reset your password."))}).always(function(){$('[data-role="reset-submit"]').removeClass("disabled")})}function reset_validateConfirmPwd(a,e,t){var i=!0,s="New password does not match",d=a.parent().siblings(".warning-info");return e!==t?(d.removeClass("off"),d.children("span").html(s),i=!1):d.addClass("off"),i}function change_password(){$(".change-save").addClass("disabled"),$.ajax({url:"/user/modifyUserPwd",type:"POST",data:$("#changepassword").serialize()}).done(function(a){$(".changepwd-info").html(a.prompt_msg);var e=$("#changePwdBtn");a.success?(e.attr("href",a.redirectUrl),e.html("OK"),ChangePwdModal.open()):(e.html("Close"),ChangePwdModal.open(),e.click(function(){ChangePwdModal.close()}))}).always(function(){$(".change-save").removeClass("disabled")})}function address_delete(a){$.ajax({url:"/address/"+a.data("aid"),type:"delete",data:{}}).done(function(e){e.success&&(DelAddressModal.close(),a.parents(".col-md-6").remove())})}function address_check(a){var e=!1,t=a.siblings(".warning-info"),i=a.val();return""==i||void 0==i||null==i?(t.removeClass("off"),e=!1):(t.addClass("off"),e=!0),e}function address_validationEmail(a){var e=!1,t="Please enter your email",i="Please enter a valid email address",s=a.siblings(".warning-info"),d=a.val(),n=/^[a-zA-Z0-9_-]+@([a-z0-9]*[-_]?[a-z0-9]+)+[\.][a-z]{2,3}([\.][a-z]{2})?$/i;return""==d||void 0==d||null==d?(s.removeClass("off"),s.children("span").html(t),e=!1):n.test(d)?(s.addClass("off"),e=!0):(s.removeClass("off"),s.children("span").html(i),e=!1),e}function validateState(){$(".address-state").length>0?address_check($(".address-state"))?$(".address-save").removeClass("disabled"):$(".address-save").addClass("disabled"):$(".address-save").removeClass("disabled")}function profile_updateUser(){$.ajax({url:"/user/modify",type:"post",data:$("#changeProfile").serialize()}).done(function(a){a.success&&($('input[name="nick"]').attr("placeholder",a.data.nickname),$(".name").html(a.data.nickname),$('input[name="nick"]').val(""),$(".profile-save").addClass("disabled"))})}function designer_getDesignerList(){var a=$("#designerContainer"),e=a.data("start"),t=10;e!==-1&&a.data("loading")!==!0&&(a.data("loading",!0),loadingShow(".designer-loading",".designerList-seeMore"),$.ajax({url:"/designer",data:{start:e,size:t,ajax:1}}).done(function(e){if(null===e.data||""===e.data||null===e.data.list||""===e.data.list||0===e.data.list.length)a.data("start",-1),HideSeeMore(".designerList-seeMore"),loadingAndSeemoreHide(".designer-loading",".designerList-seeMore");else{designer_appendDesignerList(e.data);var i=e.data.list.length,s=e.data.start;i<t?a.data("start",-1):a.data("start",s),e.data.list.length<t&&HideSeeMore(".designerList-seeMore"),$("[data-clk]").unbind("click"),$("[data-clk]").click(function(){var a=$(this);$.ajax({url:a.data("clk"),type:"GET"})});var d=9/16,n=$(".player-media").width(),o=n*d;$(".ytplayer").length>0&&($(".designer-media").css("height",o),$(".designer-beginPlayer").css("display","block")),initSwiper(),swiperBtnHover(),SubstringText(".designer-intro",140),$("img.img-lazy").lazyload({threshold:1e3,effect:"fadeIn"})}}).always(function(){a.data("loading",!1),loadingHide(".designer-loading",".designerList-seeMore")}))}function initSwiper(){new Swiper(".swiper-container",{pagination:".swiper-pagination",nextButton:".swiper-button-next",prevButton:".swiper-button-prev",freeMode:!0,slidesPerView:"auto",freeModeMomentumRatio:.5})}function designer_appendDesignerList(a){var e=$(".designerList-item").length;if(e%2===0)var t=template("tpl-designerList-even",a);else var t=template("tpl-designerList-odd",a);var i=$.parseHTML(t);$("#designerContainer").append(i)}function getProductList(){var a=$("#productList-container"),e=a.data("pagenum"),t=32,i=a.data("categoryid");if(e!==-1&&a.data("loading")!==!0){a.data("loading",!0);var s=++e;loadingShow(".product-loading",".productList-seeMore"),$.ajax({url:"/products",data:{pagenum:e,pagesize:t,cid:i}}).done(function(e){onImpressProduct(e.data.list),null===e.data||""===e.data?(a.data("pagenum",-1),HideSeeMore(".productList-seeMore")):null===e.data.list||""===e.data.list||void 0===e.data.list?(a.data("pagenum",-1),HideSeeMore(".productList-seeMore")):(appendProductList(e.data),a.data("pagenum",s),e.data.list.length<t&&HideSeeMore(".productList-seeMore"),$("[data-clk]").unbind("click"),$("[data-clk]").bind("click",function(){var a=$(this);$("#productClick-name").val(a.data("title")),$("#productClick-spu").val(a.data("spu")),$("#productClick-price").val(a.data("price")),$.ajax({url:a.data("clk"),type:"GET"})}),$("img.img-lazy").lazyload({threshold:1e3,effect:"fadeIn"}))}).always(function(){a.data("loading",!1),loadingHide(".product-loading",".productList-seeMore")})}}function appendProductList(a){var e=template("tpl-product",a),t=$.parseHTML(e);$("#productList-container").find(".row").append(t)}function getDailyList(){var a=$("#dailyList-container"),e=a.data("pagenum"),t=20;if(e!==-1&&a.data("loading")!==!0){a.data("loading",!0);var i=++e;loadingShow(".daily-loading",".dailyList-seeMore"),$.ajax({url:"/daily",data:{pagesize:t,pagenum:e,ajax:1}}).done(function(e){if(null===e.data||""===e.data)a.data("pagenum",-1),HideSeeMore(".dailyList-seeMore"),loadingAndSeemoreHide(".daily-loading",".dailyList-seeMore");else if(null===e.data.list||""===e.data.list||void 0===e.data.list)a.data("pagenum",-1),HideSeeMore(".dailyList-seeMore"),loadingAndSeemoreHide(".daily-loading",".dailyList-seeMore");else{appendDailyList(e.data),a.data("pagenum",i);var s=9/16,d=$(".daily-item").width(),n=d*s;$(".ytplayer").length>0&&($(".designer-media").css("height",n),$(".designer-beginPlayer").css("display","block")),$("[data-clk]").unbind("click"),$("[data-clk]").bind("click",function(){var a=$(this);$.ajax({url:a.data("clk"),type:"GET"})}),$("#daily-wookmark").imagesLoaded(function(){new Wookmark("#daily-wookmark",{container:$("#daily-wookmark"),align:"center",offset:0,itemWidth:272});loadingHide(".daily-loading",".dailyList-seeMore");var a=e.data.list.length;a<t&&HideSeeMore(".dailyList-seeMore")}),$("img.img-lazy").lazyload({threshold:1e3,effect:"fadeIn"})}}).always(function(){a.data("loading",!1)})}}function appendDailyList(a){var e=template("tpl-daily",a),t=$.parseHTML(e);$("#dailyList-container").find("#daily-wookmark").append(t)}function getOrderList(){var a=$("#orderListContainer"),e=a.data("pagenum"),t=10;if(e!==-1&&a.data("loading")!==!0){a.data("loading",!0);var i=++e;loadingShow(".orderList-loading",".orderList-seeMore"),$.ajax({url:"/order/orderlist",data:{num:e,size:t,ajax:1}}).done(function(e){null===e.data||""===e.data?(a.data("pagenum",-1),HideSeeMore(".orderList-seeMore"),loadingAndSeemoreHide(".orderList-loading",".orderList-seeMore")):0===e.data.list.length||""===e.data.list||void 0===e.data.list?(a.data("pagenum",-1),HideSeeMore(".orderList-seeMore"),loadingAndSeemoreHide(".orderList-loading",".orderList-seeMore")):(appendOrderList(e.data),a.data("pagenum",i),e.data.list.length<t&&HideSeeMore(".orderList-seeMore"))}).always(function(){a.data("loading",!1),loadingHide(".orderList-loading",".orderList-seeMore")})}}function appendOrderList(a){var e=template("tpl-orderList",a),t=$.parseHTML(e);$("#orderListContainer").append(t)}function order_getOperate(){var operate=[],orderList=eval($("#buyAgain").data("orderlist"));return $.each(orderList,function(a,e){var t={sale_qtty:e.sale_qtty,select:!0,sku:e.sku,VAList:[]};if(null!=e.vas_info&&void 0!=e.vas_info){var i=[];$.each(e.vas_info,function(a,e){i[a]={},i[a].user_remark=e.user_remark,i[a].vas_id=e.vas_id}),t.VAList=i}operate.push(t)}),console.log(operate),operate}function order_buyAgain(){var a=order_getOperate();$.ajax({url:"/cart/addBatch",type:"POST",data:{operate:a}}).done(function(a){a.success&&(window.location.href=a.redirectUrl)})}function getWishList(){var a=$("#wishList-container"),e=a.data("pagenum"),t=9;if(e!==-1&&a.data("loading")!==!0){a.data("loading",!0);var i=++e;loadingShow(".wish-loading",".btn-seeMore-wishList"),$.ajax({url:"/wish",data:{size:t,num:e,ajax:1}}).done(function(e){null===e.data||""===e.data?(a.data("pagenum",-1),HideSeeMore(".wishList-seeMore"),loadingAndSeemoreHide(".wish-loading",".btn-seeMore-wishList")):0===e.data.list.length?(a.data("pagenum",-1),HideSeeMore(".wishList-seeMore"),loadingAndSeemoreHide(".wish-loading",".btn-seeMore-wishList")):(appendWishList(e.data),a.data("pagenum",i),$("#wishlist-wookmark").imagesLoaded(function(){loadingHide(".wish-loading",".btn-seeMore-wishList"),$(".isHidden").removeClass("isHidden"),new Wookmark("#wishlist-wookmark",{container:$("#wishlist-wookmark"),align:"left",offset:0,itemWidth:285});var a=e.data.list.length;a<t&&HideSeeMore(".wishList-seeMore")}))}).always(function(){a.data("loading",!1)})}}function appendWishList(a){var e=template("tpl-wish",a),t=$.parseHTML(e);$("#wishList-container").find("#wishlist-wookmark").append(t)}function getFollowList(){var a=$("#followList-container"),e=a.data("pagenum"),t=8;if(e!==-1&&a.data("loading")!==!0){a.data("loading",!0);var i=++e;loadingShow(".follow-loading",".btn-seeMore-follow"),$.ajax({url:"/following",data:{size:t,num:e,ajax:1}}).done(function(e){null===e.data||""===e.data?(a.data("pagenum",-1),HideSeeMore(".followList-seeMore"),loadingAndSeemoreHide(".follow-loading",".btn-seeMore-follow")):0===e.data.list.length?(a.data("pagenum",-1),HideSeeMore(".followList-seeMore"),loadingAndSeemoreHide(".follow-loading",".btn-seeMore-follow")):(appendFollowList(e.data),a.data("pagenum",i),loadingHide(".follow-loading",".btn-seeMore-follow"),e.data.list.length<t&&HideSeeMore(".followList-seeMore"),$("img.img-lazy").lazyload({threshold:200,effect:"fadeIn"}))}).always(function(){a.data("loading",!1)})}}function appendFollowList(a){var e=template("tpl-follow",a),t=$.parseHTML(e);$("#followList-container").find(".row").append(t)}function getCoupons(a){if($("#checkoutView").data("status"))var e="/coupon";else if($("#userpromotions").data("status"))var e="/usercoupon";$.ajax({url:e,type:"GET"}).done(function(e){e.success?(appendCouponList(e.data),$(".checkoutPromotion-item").each(function(){$(this).hasClass("codeItem")&&$(this).data("bindid")==$("#pcode").data("bindid")&&($("#codemessage").html($(this).data("promotioncode")),$(".codeItem").removeClass("active"),$("[data-bindid="+$("#pcode").data("bindid")+"]").addClass("active"))}),2===a&&($(".promotion-item").length>0?($(".showPromotionCode").removeClass("disabled"),$(".addPromotionCode").addClass("disabled")):($(".showPromotionCode").addClass("disabled"),$(".addPromotionCode").removeClass("disabled")))):console.log("111111")})}function appendCouponList(a){var e=template("tpl-coupon",a),t=$.parseHTML(e);$(".coupon-list").html(t)}function ask_addMessage(){$.ajax({url:"/askshopping",type:"POST",data:$("#form-askQuestion").serialize()}).done(function(a){a.success&&(window.location.href=a.redirectUrl)})}var testIndex=0;try{$(function(){var a=$(".download-info");a.click(function(){window.location="/download"}),getCookie("pcdownloadingApp")?a.remove():a.removeAttr("hidden")})}catch(a){}$(".btn-closeDownload").on("click",function(){setCookie("pcdownloadingApp","true"),$(".download-info").remove()}),$(document).on("scroll",function(a){imprList()}),$(document).ready(function(){$("[data-clk]").unbind("click"),$("[data-clk]").click(function(){var a=$(this);$("#productClick-name").val(a.data("title")),$("#productClick-spu").val(a.data("spu")),$("#productClick-price").val(a.data("price")),$.ajax({url:a.data("clk"),type:"GET"})})});try{var swiper=new Swiper(".swiper-container",{pagination:".swiper-pagination",nextButton:".swiper-button-next",prevButton:".swiper-button-prev",freeMode:!0,slidesPerView:"auto",freeModeMomentumRatio:.5}),swiper1=new Swiper(".bannerSwiper-container",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",autoplay:4e3,autoplayDisableOnInteraction:!1,spaceBetween:30,effect:"fade",loop:!0})}catch(a){}swiperBtnHover(),$(".small-img").on("click",function(a){$(this).hasClass("active")||($(".productImg-item img").removeClass("active"),$(this).addClass("active"))});var product_data=eval("("+$("#jsonStr").val()+")"),spuAttrs="undefined"!=typeof product_data?product_data.spuAttrs:"";void 0!=spuAttrs&&1==spuAttrs.length&&1==spuAttrs[0].skuAttrValues.length&&(console.log(spuAttrs[0].attr_type),$("#p_a_w"+spuAttrs[0].attr_type).data("sel",1),$("#productsku").val(product_data.main_sku),$("#skutype"+spuAttrs[0].skuAttrValues[0].attr_value_id).addClass("active"));var product_arrayTemp_click=[];$(".btn-itemProperty").on("click",function(){var a=$(this).data("type");""===a||$(this).hasClass("disabled")||($("#skuQty").data("num",1),$("#skuQty").html(1),$("#skuQty").parent().siblings(".warning-info").addClass("off"),$("#delQtySku").addClass("disabled"),$("#addQtySku").removeClass("disabled"),$(this).hasClass("active")?($(this).removeClass("active"),delete product_arrayTemp_click["key"+$(this).attr("data-attr-type")],$("#p_a_w"+$(this).attr("data-attr-type")).data("sel",0),$("#productsku").val()&&$("#productsku").val("")):($(".btn-itemProperty[data-type="+a+"]").removeClass("active"),$(this).addClass("active"),$("#p_a_w"+$(this).attr("data-attr-type")).data("sel",1),$("#p_a_w"+$(this).data("attr-type")).hasClass("off")||$("#p_a_w"+$(this).data("attr-type")).addClass("off")),product_onclickStatic(product_onSkuClick($(this).attr("data-attr-type"),$(this).attr("data-attr-value-id"),$(this).hasClass("active")),$(this).attr("data-attr-type"),$(this).hasClass("active")))});var product_cache_skuQty=[];$(".patb").on("click",function(a){if($("#productsku").val()){$(this).parent().siblings(".warning-info").addClass("off");var e=$("#skuQty").data("num")+$(this).data("num"),t=product_cache_skuQty[$("#productsku").val()]?product_cache_skuQty[$("#productsku").val()]:product_getSkuQty($("#productsku").val());e>0&&e<=t?(!!$("#delQtySku").hasClass("disabled")&&$("#delQtySku").removeClass("disabled"),!!$("#addQtySku").hasClass("disabled")&&$("#addQtySku").removeClass("disabled"),$("#skuQty").data("num",e),$("#skuQty").html(e)):e>20&&e<=50&&$(this).data("num")>0?($("#addQtySku").hasClass("disabled")||checkStock($("#productsku").val()+"_"+e),$("#addQtySku").addClass("disabled")):e>=t&&$(this).data("num")>0&&($("#addQtySku").addClass("disabled"),$(this).parent().siblings(".warning-info").removeClass("off"),console.log(e),e>=50?$(this).parent().siblings(".warning-info").children("span").html("Warning: "+t+" items limit"):$(this).parent().siblings(".warning-info").children("span").html("Warning: only "+t+" left")),e<=1&&!$("#delQtySku").hasClass("disabled")&&$("#delQtySku").addClass("disabled")}else(!$("#delQtySku").hasClass("disabled")||$(this).data("num")>0)&&pSelAttr();$("#addToCart-quantity").val($("#skuQty").html())}),$("#productAddBag").on("click",function(a){if(!pSelAttr())return!1;if($("#productsku").val()){var e={sale_qtty:$("#skuQty").data("num"),select:!0,sku:$("#productsku").val(),VAList:[]},t=!0;if(void 0!=product_data.vasBases&&$.each(product_data.vasBases,function(a,i){$("#vas_id"+i.vas_id).hasClass("disabled")||(""!=$("#vas_id"+i.vas_id).val()&&null!=$("#vas_id"+i.vas_id).val()||($("#vas_id"+i.vas_id).parents(".flex-alignCenter").siblings(".warning-info").removeClass("off"),t=!1),e.VAList.push({vas_id:i.vas_id,user_remark:$("#vas_id"+i.vas_id).val()}))}),!t)return;$(this).addClass("disabled");var i=$(this).data("action");onAddToCart(),$.ajax({url:"/cart/add",type:i,data:{operate:e}}).done(function(a){$("#productAddBag").removeClass("disabled"),a.success?(AddItemModal.open(),setTimeout(function(){AddItemModal.close()},1500),$(".shoppingCart-number").hasClass("hidden")&&$(".shoppingCart-number").removeClass("hidden"),null!=a.redirectUrl&&(window.location.href=a.redirectUrl)):(AddItemFailModal.open(),setTimeout(function(){AddItemFailModal.close()},1500))})}}),$(".input-engraving").on("click",function(){$(this).removeClass("disabled"),$(this).siblings(".icon-checkcircle").addClass("active"),$(this).parents(".flex-alignCenter").siblings(".warning-info").addClass("off")});var CheckNum=0;$(".icon-checkcircle").on("click",function(){0===CheckNum&&$(this).hasClass("active")?CheckNum=0:($(this).toggleClass("active"),$(this).parents(".flex-alignCenter").siblings(".warning-info").addClass("off"),$(this).hasClass("active")?($(this).siblings(".input-engraving").removeClass("disabled"),$(this).siblings(".input-engraving").removeAttr("disabled")):($(this).siblings(".input-engraving").addClass("disabled"),$(this).siblings(".input-engraving").attr({disabled:"disabled"})),CheckNum++)}),$(".btn-wish").on("click",function(){var a=$(this),e=a.data("spu");void 0!=e?$.ajax({url:"/wishlist/"+e,type:"GET"}).done(function(e){e.success&&a.toggleClass("active")}):(e=a.data("actionspu"),$.ajax({url:"/noteaction",type:"get",data:{action:"wish",spu:e}}).done(function(a){window.location.href="/login"}))}),$("#productList-container").on("click",".btn-wishList",function(a){var e=$(a.target),t=e.data("spu");void 0!=t?$.ajax({url:"/wishlist/"+t,type:"GET"}).done(function(a){a.success&&e.toggleClass("active")}):(t=e.data("actionspu"),$.ajax({url:"/noteaction",type:"get",data:{action:"wish",spu:t}}).done(function(a){window.location.href="/login"}))}),$(".btn-productTemplate").on("click",function(){var a=$(this).data("tid"),e=$("#template"+a),t=$(this);
a!=-1&&$.ajax({url:"/service/"+a,type:"GET"}).done(function(a){a.success&&(t.data("tid",-1),appendProductTemplateList(e,a.data))})});var beginTimes=$(".limited-content").data("begintime"),endTimes=$(".limited-content").data("endtime"),leftNum=$(".limited-content").data("lefttime"),qtty=$(".limited-content").data("qtty"),secondnum=parseInt(endTimes-beginTimes);leftNum!=-1&&$(function(){timer(leftNum/1e3)});try{var Options={closeOnOutsideClick:!1,closeOnCancel:!1,hashTracking:!1},OptionsShare={closeOnOutsideClick:!0,closeOnCancel:!1,hashTracking:!1},CartModal=$("[data-remodal-id=cartmodal]").remodal(Options),AddItemModal=$("[data-remodal-id=additem-modal]").remodal(Options),AddItemFailModal=$("[data-remodal-id=additemfail-modal]").remodal(Options),DelAddressModal=$("[data-remodal-id=addressmodal-modal]").remodal(Options),ChangePwdModal=$("[data-remodal-id=changepwd-modal]").remodal(Options),ShareModal=$("[data-remodal-id=sharemodal]").remodal(OptionsShare)}catch(a){}$(".cupn").on("click",function(a){var e=$(this),t=e.data("sku");if(t&&!e.hasClass("disabled")){var i=1*$("#cskunum"+t).html()+e.data("num");$.ajax({url:"/checkStock",type:"POST",data:{skus:t+"_"+i}}).done(function(a){a.success&&(1===a.data.list[0].stockStatus?($("#cskunum"+t).html(i),e.removeClass("disabled"),2==i&&$("#cdsku"+t).removeClass("disabled"),1==i&&$("#cdsku"+t).addClass("disabled"),i>=50&&($("#casku"+t).addClass("disabled"),$("#casku"+t).parents(".cartProduct-item").siblings(".warning-info").removeClass("off"),$("#casku"+t).parents(".cartProduct-item").siblings(".warning-info").children("span").html(i+" items limit")),i<=49&&($("#casku"+t).removeClass("disabled"),$("#casku"+t).parents(".cartProduct-item").siblings(".warning-info").addClass("off")),$.ajax({url:"cart/alterQtty",type:"POST",data:{sku:t,qtty:i}}).done(function(a){a.success&&cart_update_info()})):($("#casku"+t).addClass("disabled"),$("#casku"+t).parents(".cartProduct-item").siblings(".warning-info").removeClass("off"),$("#casku"+t).parents(".cartProduct-item").siblings(".warning-info").children("span").html("Warning: Only "+(i-1)+" left")))})}}),$(".cartManage").on("click",function(a){var e=$(this).data("action"),t=$(this).data("sku"),i=$(this).parents(".cartProduct-item");$.ajax({url:"/cart/operate",type:"POST",data:{cmd:e,sku:t}}).done(function(a){a.success?"movetocart"==e||"save"==e?location.reload():(i.remove(),cart_update_info()):AddItemFailModal.open()})}),$(".delCartM").on("click",function(){onRemoveFromCart();var a=$("#modalDialog").data("action"),e=$("#modalDialog").data("sku");$("#modalDialog").data("id");$.ajax({url:"/cart/operate",type:"POST",data:{cmd:a,sku:e}}).done(function(t){t.success&&("movetocart"==a||"save"==a?location.reload():($("#csku"+e).remove(),cart_update_info())),CartModal.close()})}),$('[data-type="cart-remove"]').on("click",function(){$("#modalDialog").data("action",$(this).data("action")),$("#modalDialog").data("sku",$(this).data("sku")),$("#removeFromCart-name").val($(this).data("title")),$("#removeFromCart-spu").val($(this).data("spu")),$("#removeFromCart-price").val($(this).data("price")),$("#removeFromCart-quantity").val($(this).data("qtty")),CartModal.open()}),$("#addAddress").on("click",function(){var a=($('input[name="email"]'),$('input[name="name"]')),e=$('input[name="city"]'),t=$('input[name="tel"]'),i=$('input[name="addr1"]'),s=$('input[name="zip"]');if(checkValid(a)&&checkValid(e)&&checkValid(t)&&checkValid(i)&&checkValid(s)){var d=$("#addAddressForm").data("aid");""===d||void 0===d?$.ajax({url:"/address",type:"POST",data:$("#addAddressForm").serialize()}).done(function(a){a.success&&($(".select-address").removeClass("disabled"),$(".add-address").addClass("disabled"),$("#addAddressForm").find('input[type="text"]').val(""),getAddressList())}):($(".isDefault").hasClass("active")?$('input[name="isd"]').val(1):$('input[name="isd"]').val(0),$.ajax({url:"/address/"+d,type:"PUT",data:$("#addAddressForm").serialize()}).done(function(a){a.success&&($(".select-address").removeClass("disabled"),$(".add-address").addClass("disabled"),$("#addAddressForm").find('input[type="text"]').val(""),getAddressList())}))}return!1}),$("#addAddress-cancel").on("click",function(){$(".select-address").removeClass("disabled"),$(".add-address").addClass("disabled"),$("#addAddressForm").find('input[type="text"]').val(""),$('select[name="country"]').prop("selectedIndex",0)}),$('#addAddressForm input[type="text"]').on("focus",function(){$(this).siblings(".warning-info").addClass("off")}),$(".btn-showHide").on("click",function(){var a=$(this).siblings(".showHide-body");a.hasClass("active")?(a.slideUp(500),a.removeClass("active"),$(this).removeClass("active")):(a.slideDown(500),a.addClass("active"),$(this).addClass("active"))}),$(".btn-codeShowHide").on("click",function(){var a=$(this).siblings(".showHide-body"),e=$(this).siblings(".showHide-simpleInfo");a.hasClass("active")?(a.slideUp(500),a.removeClass("active"),$(this).removeClass("active"),a.css("display","none"),e.css("display","block")):(a.slideDown(500),a.addClass("active"),$(this).addClass("active"),a.css("display","flex"),e.css("display","none"))}),$(".btn-makePrimary").on("click",function(){$(this).hasClass("active")?$('input[name="isd"]:eq(1)').attr("checked","checked"):$('input[name="isd"]:eq(0)').attr("checked","checked")}),$("#btnAddrShowHide").on("click",function(){if($("#addrShowHide").children(".showHide-simpleInfo").length>0){var a=$("#addrShowHide").siblings(".showHide-body");a.hasClass("active")&&(a.slideUp(500),a.removeClass("active"),$("#addrShowHide").removeClass("active"))}}),$(".address-list").on("click",".bg-address",function(){$(".address-item").removeClass("active"),$(this).parent(".address-item").addClass("active"),$("#defaultAddr").html($(this).parent(".address-item").data("info")),$("#defaultAddr").data("csn",$(this).parent(".address-item").data("csn")),$("#defaultAddr").data("aid",$(this).parent(".address-item").data("aid")),getshiplist()}),$(".address-list").on("click",".btn-editAddress",function(){$(".select-address").addClass("disabled"),$(".add-address").removeClass("disabled"),CheckNum=0;var a=$(this).parent(".address-item").data("aid");$("#addAddressForm").data("aid",a),$(".address-text").html("Modify Address"),initAddAddressForm()}),$('select[name="country"]').change(function(){var a=$('select[name="country"]').val();initCityState(a,""),address_check($(".address-name"))&&address_check($(".address-city"))&&address_check($(".address-phone"))&&address_check($(".address-zipcode"))?validateState():$(".address-save").addClass("disabled")});try{if($("#checkoutView").data("status")||$("#addressView").data("status")){var Country=$('select[name="country"] option:selected').text();initCityState(Country,"")}}catch(a){}$(".checkout-method").on("click",".methodRadio",function(){var a=$(this).data("price")>0?" +$"+($(this).data("price")/100).toFixed(2):"";$(".shippingMethodShow").html($(this).data("show")+a),getCheckoutInfo()}),$("#smsubmit").on("click",function(){if($("#smShowHide").children(".showHide-simpleInfo").length>0){var a=$("#smShowHide").siblings(".showHide-body");a.hasClass("active")&&(a.slideUp(500),a.removeClass("active"),$("#smShowHide").removeClass("active"))}}),$("#crsubmit").on("click",function(){var a=$('textarea[name="cremark"]').val();if(a.length>=30&&(a=a.substring(0,30)+"..."),$("#srmessage").html(a),$("#crShowHide").children(".showHide-simpleInfo").length>0){var e=$("#crShowHide").siblings(".showHide-body");e.hasClass("active")&&(e.slideUp(500),e.removeClass("active"),$("#crShowHide").removeClass("active"))}}),$(".btn-toCheckout").on("click",function(){if(onCheckout(),$("#defaultAddr").data("aid")<1)return checkValid($('input[name="name"]')),$("html,body").animate({scrollTop:$("#addrShowHide").offset().top},100),!1;var a=$(this).data("with");$.ajax({url:"/order",type:"POST",data:{aid:$("#defaultAddr").data("aid"),bindid:void 0==$("#pcode").data("bindid")?"":$("#pcode").data("bindid"),remark:$('input[name="cremark"]').val(),stype:$('input[name="shippingMethod"]:checked').val(),paym:a}}).done(function(a){a.success?window.location.href=a.redirectUrl:($(".checkoutWarning .font-size-base").html("Payment error, refresh and try again!"),$(".checkoutWarning").removeAttr("hidden"),setTimeout(function(){location.reload()},2e3))})}),$(".btn-addNewAddress").on("click",function(){$(".select-address").addClass("disabled"),$(".add-address").removeClass("disabled"),$("#addAddressForm").data("aid",""),$(".address-text").html("Add Shipping Address"),initAddAddressForm()}),1==$("#checkoutView").data("status")&&getAddressList(),$(".login-email").on("keyup blur",function(){var a=$(this).val();""===a||void 0===a?$(this).siblings(".input-clear").addClass("hidden"):$(this).siblings(".input-clear").removeClass("hidden"),login_validationEmail($(this))&&login_validationPassword($(".login-pw"))?$('div[data-role="login-submit"]').removeClass("disabled"):$('div[data-role="login-submit"]').addClass("disabled")}),$(".login-pw").on("keyup blur",function(){login_validationPassword($(this))&&login_validationEmail($(".login-email"))?$('div[data-role="login-submit"]').removeClass("disabled"):$('div[data-role="login-submit"]').addClass("disabled")}),$(".input-clear").on("click",function(a){$(a.target).siblings("input").val(""),$(this).addClass("hidden")}),$(".input-show").on("click",function(a){var e=$(a.target).siblings("input");$(a.target).hasClass("off")?(e.attr("type","text"),$(a.target).removeClass("off")):(e.attr("type","password"),$(a.target).addClass("off"))}),$('[data-role="login-submit"]').on("click",function(){login_validationEmail($(".login-email"))&&login_validationPassword($(".login-pw"))?$('div[data-role="login-submit"]').removeClass("disabled"):$('div[data-role="login-submit"]').addClass("disabled"),$(this).hasClass("disabled")||login_signin()}),$("body").keydown(function(a){var e=e||a;"13"==e.keyCode&&$('[data-role="login-submit"]').click()}),$(".forget-email").on("keyup blur",function(){login_validationEmail($(this))?$('div[data-role="forget-submit"]').removeClass("disabled"):$('div[data-role="forget-submit"]').addClass("disabled")}),$('[data-role="forget-submit"]').on("click",function(){console.info("Reset Password"),$(this).hasClass("disabled")||login_forgetPassword()}),$(".btn-forgotPwd").on("click",function(){$(".login-content").addClass("hidden").removeClass("active"),$(".restPwd-content").removeClass("hidden").addClass("active"),$(".login-title").text("Forget Password?")}),$(".btn-backLogin").on("click",function(){$(".restPwd-content").addClass("hidden").removeClass("active"),$(".login-content").removeClass("hidden").addClass("active"),$(".login-title").text("Sign in with Motif Account")});var ClientID="344651811353-qqgbjruqute7t6heftrcquu0iq2u2jd6.apps.googleusercontent.com",auth2={},initGoogle=function(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:ClientID,cookiepolicy:"single_host_origin"}),attachSignin(document.getElementById("googleLogin"))})};try{initGoogle()}catch(a){}window.fbAsyncInit=function(){FB.init({appId:"270298046670851",cookie:!0,xfbml:!0,version:"v2.6"})},function(a,e,t){var i,s=a.getElementsByTagName(e)[0];a.getElementById(t)||(i=a.createElement(e),i.id=t,i.src="//connect.facebook.net/en_US/sdk.js",s.parentNode.insertBefore(i,s))}(document,"script","facebook-jssdk"),$("#facebookLogin").click(function(){FB.login(function(a){statusChangeCallback(a)},{scope:"public_profile,email"})}),$(".emailRequired-email").on("keyup blur",function(){""===$(this).val()?$(this).siblings(".icon-delete").addClass("hidden"):$(this).siblings(".icon-delete").removeClass("hidden"),login_validationEmail($(this))?$('div[data-role="emailRequired-submit"]').removeClass("disabled"):$('div[data-role="emailRequired-submit"]').addClass("disabled")}),$('div[data-role="emailRequired-submit"]').on("click",function(){$(this).hasClass("disabled")||($.ajax({url:"/facebooklogin",type:"post",data:$("#register").serialize()}).done(function(a){a.success&&(window.location.href=a.redirectUrl)}),$(".uploademail-loading").css("display","block"),$('div[data-role="emailRequired-submit"]').addClass("disabled"),setTimeout(function(){$(".uploademail-loading").css("display","none"),$('div[data-role="emailRequired-submit"]').removeClass("disabled")},1500))}),$(".register-nick").on("keyup blur",function(){register_validationNick($(this))&&login_validationEmail($(".register-email"))&&login_validationPassword($(".register-pw"))?$('div[data-role="register-submit"]').removeClass("disabled"):$('div[data-role="register-submit"]').addClass("disabled")}),$(".register-email").on("keyup blur",function(){login_validationEmail($(this))&&register_validationNick($(".register-nick"))&&login_validationPassword($(".register-pw"))?$('div[data-role="register-submit"]').removeClass("disabled"):$('div[data-role="register-submit"]').addClass("disabled")}),$(".register-pw").on("keyup blur",function(){login_validationPassword($(this))&&register_validationNick($(".register-nick"))&&login_validationEmail($(".register-email"))?$('div[data-role="register-submit"]').removeClass("disabled"):$('div[data-role="register-submit"]').addClass("disabled")}),$('[data-role="register-submit"]').on("click",function(){register_validationNick($(".register-nick"))&&login_validationEmail($(".register-email"))&&login_validationPassword($(".register-pw"))?$('div[data-role="register-submit"]').removeClass("disabled"):$('div[data-role="register-submit"]').addClass("disabled"),$(this).hasClass("disabled")||register_signup()}),$(".reset-pw").on("keyup blur",function(){var a=$(this).val(),e=$('input[name="lastpw"]').val();login_validationPassword($(this))&&reset_validateConfirmPwd($(".reset-lastpw"),a,e)?$('div[data-role="reset-submit"]').removeClass("disabled"):$('div[data-role="reset-submit"]').addClass("disabled")}),$(".reset-lastpw").on("keyup blur",function(){var a=$('input[name="pw"]').val(),e=$(this).val();login_validationPassword($(this))&&reset_validateConfirmPwd($(this),a,e)?$('div[data-role="reset-submit"]').removeClass("disabled"):$('div[data-role="reset-submit"]').addClass("disabled")}),$('[data-role="reset-submit"]').on("click",function(){$(this).hasClass("disabled")||reset_password()}),$(".change-oldpw").on("keyup blur",function(){var a=$(".change-pw").val(),e=$(".change-cpw").val();login_validationPassword($(this))&&login_validationPassword($(".change-pw"))&&reset_validateConfirmPwd($(".change-cpw"),a,e)?$(".change-save").removeClass("disabled"):$(".change-save").addClass("disabled")}),$(".change-pw").on("keyup blur",function(){var a=$(this).val(),e=$(".change-cpw").val();login_validationPassword($(this))&&login_validationPassword($(".change-oldpw"))&&reset_validateConfirmPwd($(".change-cpw"),a,e)?$(".change-save").removeClass("disabled"):$(".change-save").addClass("disabled")}),$(".change-cpw").on("keyup blur",function(){var a=$(".change-pw").val(),e=$(this).val();login_validationPassword($(this))&&reset_validateConfirmPwd($(this),a,e)&&login_validationPassword($(".change-oldpw"))&&login_validationPassword($(".change-pw"))?$(".change-save").removeClass("disabled"):$(".change-save").addClass("disabled")}),$(".change-save").on("click",function(a){$(a.target).hasClass("disabled")||change_password()}),$("#addressList-info").on("click",".btn-delAddress",function(){var a=$(this).parent().data("aid");$('[data-remodal-id="addressmodal-modal"]').data("addressid",a),DelAddressModal.open()}),$(".delAddress").on("click",function(){var a=$('[data-remodal-id="addressmodal-modal"]').data("addressid"),e=$('[data-aid="'+a+'"]');address_delete(e)}),$(".address-name").on("keyup blur",function(){$(this).val();address_check($(this))&&address_check($(".address-city"))&&address_check($(".address-phone"))&&address_check($(".address-street"))&&address_check($(".address-zipcode"))?validateState():$(".address-save").addClass("disabled")}),$(".address-city").on("keyup blur",function(){address_check($(this))&&address_check($(".address-name"))&&address_check($(".address-phone"))&&address_check($(".address-street"))&&address_check($(".address-zipcode"))?validateState():$(".address-save").addClass("disabled")}),$(".address-phone").on("keyup blur",function(){address_check($(this))&&address_check($(".address-name"))&&address_check($(".address-city"))&&address_check($(".address-street"))&&address_check($(".address-zipcode"))?validateState():$(".address-save").addClass("disabled")}),$(".address-street").on("keyup blur",function(){address_check($(this))&&address_check($(".address-name"))&&address_check($(".address-city"))&&address_check($(".address-phone"))&&address_check($(".address-zipcode"))?validateState():$(".address-save").addClass("disabled")}),$(".address-zipcode").on("keyup blur",function(){address_check($(this))&&address_check($(".address-name"))&&address_check($(".address-city"))&&address_check($(".address-phone"))&&address_check($(".address-street"))?validateState():$(".address-save").addClass("disabled")}),$(".state-info").on("keyup blur",".address-state",function(){address_check($(this))&&address_check($(".address-name"))&&address_check($(".address-city"))&&address_check($(".address-phone"))&&address_check($(".address-zipcode"))?validateState():$(".address-save").addClass("disabled")}),$("#profileIcon").change(function(a){$(".uploadProfile-loading").show(),$(".bg-uploadProfileLoading").css("display","block");var e=new XMLHttpRequest,t=$("#profileIcon").get(0).files[0],i=new FormData;i.append("_token",$('input[name="_token"]').val()),i.append("file",t),e.addEventListener("load",function(a){var e=JSON.parse(a.currentTarget.response);e.success&&($(".uploadProfile-loading").hide(),$(".bg-uploadProfileLoading").css("display","none"),$("#avatarUrl").attr("src",$("#avatarUrl").data("url")+"/n1/"+e.data.url),$(".img-circle").attr("src",$("#avatarUrl").data("url")+"/n1/"+e.data.url))},!1),e.addEventListener("error",function(a){console.log(a)},!1),e.open("post","/user/uploadicon"),e.send(i)}),$('input[name="nick"]').on("keyup",function(){""===$(this).val()?$(".profile-save").addClass("disabled"):$(".profile-save").removeClass("disabled")}),$(".profile-save").on("click",function(a){$(a.target).hasClass("disabled")||profile_updateUser()});try{$(function(){var a=$(".designer-item").length;$(".designerList-seeMore").show(),a<10&&HideSeeMore(".designerList-seeMore")}),SubstringText(".designer-intro",140)}catch(a){}$(".designerList-seeMore").on("click",function(){$("img.img-lazy").each(function(){var a=$(this).attr("src"),e=$(this).attr("data-original");a===e&&$(this).removeClass("img-lazy")}),designer_getDesignerList()}),$(".btn-follow").on("click",function(){var a=$(this),e=a.data("did");void 0!=e?$.ajax({url:"/follow/"+e,type:"GET"}).done(function(a){a.success&&($(".btn-follow").toggleClass("active"),"Following"==$(".btn-follow").html()?$(".btn-follow").html("Follow"):$(".btn-follow").html("Following"))}):(e=a.data("actiondid"),$.ajax({url:"/noteaction",type:"get",data:{action:"follow",did:e}}).done(function(a){window.location.href="/login"}))}),$("#designerContainer").on("click",".btn-following",function(){var a=$(this),e=a.data("did");void 0!=e?$.ajax({url:"/follow/"+e,type:"GET"}).done(function(e){e.success&&(a.toggleClass("active"),"Following"==a.html()?a.html("Follow"):a.html("Following"))}):(e=a.data("actiondid"),$.ajax({url:"/noteaction",type:"get",data:{action:"follow",did:e}}).done(function(a){window.location.href="/login"}))});try{$("img.img-lazy").lazyload({threshold:200,effect:"fadeIn"})}catch(a){}try{var winWidth=$(window).width(),zoomXOffset=0;zoomXOffset=winWidth>1460?40:35;var ProductDetailImg_width=$("#productImg").width()+zoomXOffset;jQuery_1_6(function(){jQuery_1_6("#jqzoom").jqzoom({zoomType:"standard",xOffset:zoomXOffset,title:!1,lens:!0,preloadImages:!1,alwaysOn:!1,zoomWidth:ProductDetailImg_width,zoomHeight:ProductDetailImg_width})})}catch(a){}try{$(function(){var a=$(".productList-item").length;$(".productList-seeMore").show(),a<32&&HideSeeMore(".productList-seeMore")})}catch(a){}$(".btn-seeMore").on("click",function(){$("img.img-lazy").each(function(){var a=$(this).attr("src"),e=$(this).attr("data-original");a===e&&$(this).removeClass("img-lazy")}),getProductList()}),$(".btn-seeMore-dailyList").on("click",function(){$("img.img-lazy").each(function(){var a=$(this).attr("src"),e=$(this).attr("data-original");a===e&&$(this).removeClass("img-lazy")}),getDailyList()}),$(function(){try{loadingShow(".daily-loading",".dailyList-seeMore"),$(".daily-banner").length>1?$(".dailyBanner-btn").css("display","block"):$(".dailyBanner-btn").css("display","none")}catch(a){}});try{$(function(){var a=$("#orderListContainer .box-shadow").length;$(".orderList-seeMore").show(),a<10&&HideSeeMore(".orderList-seeMore")})}catch(a){}$(".orderList-seeMore").on("click",function(){getOrderList()}),$("#buyAgain").click(function(){$(this).hasClass("disabled")||order_buyAgain()});try{$(function(){var a=$(".wishlist-item").length;$(".wishList-seeMore").show(),a<9&&HideSeeMore(".wishList-seeMore")})}catch(a){}$(".btn-seeMore-wishList").on("click",function(){getWishList()}),$("#wishList-container").on("click",".btn-wishing",function(a){var e=$(a.target),t=e.data("spu");$.ajax({url:"/wishlist/"+t,type:"GET"}).done(function(a){a.success&&e.toggleClass("active")})});try{$(function(){var a=$(".follow-item").length;$(".followList-seeMore").show(),a<8&&HideSeeMore(".followList-seeMore")}),SubstringText(".followText-Info",140)}catch(a){}$(".btn-seeMore-follow").on("click",function(){$("img.img-lazy").each(function(){var a=$(this).attr("src"),e=$(this).attr("data.original");a===e&&$(this).removeClass("img-lazy")}),getFollowList()}),$("#followList-container").on("click",".btn-following",function(){var a=$(this);$.ajax({url:"/follow/"+a.data("did"),type:"GET"}).done(function(e){e.success&&(a.toggleClass("active"),"Following"==a.html()?a.html("Follow"):a.html("Following"))})});try{($("#checkoutView").data("status")||$("#userpromotions").data("status"))&&getCoupons(2)}catch(a){}$(".btn-addNewCode").on("click",function(){$(".showPromotionCode").addClass("disabled"),$(".addPromotionCode").removeClass("disabled")}),$(".goback-toAdd").on("click",function(){$(".showPromotionCode").removeClass("disabled"),$(".addPromotionCode").addClass("disabled")}),$(".coupon-apply").on("click",function(){$(this).hasClass("disabled")||$.ajax({url:"/coupon",type:"post",data:{cps:$('input[name="cps"]').val()}}).done(function(a){a.success?($("#pcode").data("bindid",a.data.bind_id),getCoupons(1),$("#checkoutView").data("status")&&getCheckoutInfo(),$(".addCode-input .warning-info").addClass("off"),$(".showPromotionCode").removeClass("disabled"),$(".addPromotionCode").addClass("disabled")):($(".invalidText").html(a.prompt_msg),$(".addCode-input .warning-info").removeClass("off"))})}),$('input[name="cps"]').on("keyup",function(a){""===$(this).val()?$(".coupon-apply").addClass("disabled"):$(".coupon-apply").removeClass("disabled")}),$('input[name="cps"]').on("paste",function(a){var e=void 0;e=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):a.originalEvent.clipboardData.getData("Text"),""===e||void 0===e?$(".coupon-apply").addClass("disabled"):$(".coupon-apply").removeClass("disabled")}),$(".coupon-list").on("click",".codeItem",function(){$(".codeItem").removeClass("active"),$(this).hasClass("active")||($("#codemessage").html($(this).data("promotioncode")),$("#pcode").data("bindid",$(this).data("bindid")),$(this).addClass("active"),getCheckoutInfo())});var $designerBanImg=$(".designer-banImg");$designerBanImg.each(function(a){$(this).on("load",function(){var a=$(this).width(),e=$(this).height();a>e?(console.log("111"),console.log(a),console.log(e),$(this).css("width","100%")):(console.log("222"),console.log(a),console.log(e),$(this).css({width:"50%",margin:"0 auto"}))})}),$("#askSend").on("click",function(){ask_addMessage()}),$("#btn-inviteFriend").on("click",function(){ShareModal.open()}),$(window).scroll(function(){var a=$(window).scrollTop();a>300?$("#top").addClass("active"):$("#top").removeClass("active")}),$("#top").on("click",function(){$("html, body").animate({"scroll-top":0},"fast")})}(jQuery,Swiper),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#dailyIndex").data("show")&&$(function(){try{$("#daily-wookmark").imagesLoaded(function(){$(".daily-loading").hide(),$(".dailyList-seeMore").show(),Width=$(".player-media").width(),MediaHeight=Width*MediaScale,$(".designer-media").css("height",MediaHeight),$(".designer-beginPlayer").css("display","block");var a=(new Wookmark("#daily-wookmark",{container:$("#daily-wookmark"),align:"center",offset:0,itemWidth:272}),$("#daily-wookmark li").length);$(".productList-seeMore").show(),a<20&&HideSeeMore(".dailyList-seeMore")})}catch(a){}}),window.onload=function(){try{new Wookmark("#daily-wookmark",{container:$("#daily-wookmark"),align:"center",offset:0,itemWidth:272})}catch(a){}try{new Wookmark("#wishlist-wookmark",{container:$("#wishlist-wookmark"),align:"left",offset:0,itemWidth:285})}catch(a){}};var MediaScale=9/16,$ClickPlayer,Width=$(".player-media").width(),MediaHeight=Width*MediaScale,tag=document.createElement("script");tag.src="https://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),$(".ytplayer").length>0&&($(".designer-media").css("height",MediaHeight),$(".designer-beginPlayer").css("display","block"));var player;$(".daily-content").on("click",".bg-player",function(){Width=$(".player-media").width(),MediaHeight=Width*MediaScale,$(".designer-media").css("height",MediaHeight),$(".designer-beginPlayer").css("display","block"),startPlayer($(this))}),$("#designerContainer").on("click",".bg-player",function(){startPlayer($(this))}),$("#designerDetailContainer").on("click",".bg-player",function(){startPlayer($(this))}),$(document).on("scroll",function(a){var e=$(".player-item");0!==e.length&&$("#designerDetailContainer").length<1&&$.each(e,function(a,e){if(switchPlayer(e)&&$(e).hasClass("active")){var t=$(e),i=t.data("playid"),s=!1;t.children(".bg-player").css("display","block"),t.children(".bg-player").children(".bg-img").css("display","block"),t.children(".bg-player").children(".btn-beginPlayer").css("display","block"),t.children(".btn-morePlayer").attr("hidden","hidden"),t.removeClass("active"),t.children("iframe").remove(),s||(t.prepend('<div id="'+i+'" class="ytplayer" data-playid="'+i+'"></div>'),s=!0)}})});